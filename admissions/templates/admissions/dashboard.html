<!-- Create a new HTML file: admissions/templates/admissions/dashboard.html -->
<!DOCTYPE html>
<html>
  <a href="{% url 'logout' %}?next=/students/logout/">Logout</a>
  <p>Welcome, {{ user.username }}</p>
<head>
    <title>School Management Dashboard</title>
</head>
<body>
    <h1>School Management Dashboard</h1>
    <ul>
        <li><a href="{% url 'admission_form' %}">Admission Form</a></li>
        <li><a href="{% url 'student_list' %}">Student List</a></li>
        <li><a href="{% url 'class_6' %}">Class 6</a></li>
        <li><a href="{% url 'class_7' %}">Class 7</a></li>
        <li><a href="{% url 'class_8' %}">Class 8</a></li>
        <li><a href="{% url 'class_9' %}">Class 9</a></li>
        <li><a href="{% url 'class_10' %}">Class 10</a></li>
        <li><a href="{% url 'class_11' %}">Class 11</a></li>
        <li><a href="{% url 'class_12' %}">Class 12</a></li>
        <li><a href="{% url 'fee_detail' %}">Fee Details</a></li>
        <li><a href="{% url 'students_result' %}">Students Result</a></li>
        <!-- Add more links as needed -->
    </ul>
    <!-- Add a canvas element for the class chart -->
    <canvas id="classChart" width="400" height="200"></canvas>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      // JavaScript code to fetch data and create the chart
      document.addEventListener('DOMContentLoaded', function() {
        // Fetch student data from your Django view or API endpoint
        fetch('/admissions/api/students/')
          .then(response => response.json())
          .then(data => {
            const classData = {}; // Object to store class data
            
            // Process the data and populate classData object
            data.forEach(student => {
              const className = student.admission_class;
              if (!classData[className]) {
                classData[className] = 1;
              } else {
                classData[className]++;
              }
            });
            
            // Create the class chart
            const classChartCanvas = document.getElementById('classChart').getContext('2d');
            new Chart(classChartCanvas, {
              type: 'bar',
              data: {
                labels: Object.keys(classData), // Class names
                datasets: [{
                  label: 'Number of Students',
                  data: Object.values(classData), // Number of students per class
                  backgroundColor: 'rgba(75, 192, 192, 0.2)', // Bar color
                  borderColor: 'rgba(75, 192, 192, 1)', // Border color
                  borderWidth: 1,
                }],
              },
              options: {
                scales: {
                  y: {
                    beginAtZero: true,
                  },
                },
              },
            });
          })
          .catch(error => {
            console.error('Error fetching student data:', error);
          });
      });
    </script>
</body>
</html>
